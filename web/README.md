# Triathlon Elo Rankings Visualization

This web application visualizes triathlon athletes' Elo rankings over time using D3.js. It displays a timeline of athlete rankings with interactive features to track performance changes.

## Features

- Interactive line chart showing top athletes' Elo rating changes over time
- Timeline slider to move through different months/time periods
- Play/pause functionality for automatic animation of the rankings
- Highlight feature for focusing on specific athletes
- Detailed tooltips showing athlete information
- Featured display of the #1 ranked athlete 

## Prerequisites

- Python 3.7+
- Flask
- A web browser with JavaScript enabled

## Installation

1. Clone this repository or download the files
2. Create a Python virtual environment (recommended)
3. Install the required dependencies:

```bash
pip install -r requirements.txt
```

## Running the Application

### Step 1: Generate the static data file

First, you need to generate the static data file that will be used by the web app:

```bash
python generate_data.py
```

This script will:
1. Connect to the triathlon database
2. Extract the monthly top ratings data
3. Save it as a JSON file in `static/data/monthly_ratings.json`

This step only needs to be performed once, or whenever the database is updated.

### Step 2: Start the web server

After generating the static data, run:

```bash
python app.py
```

Then open a web browser and navigate to:

```
http://localhost:5000
```

The web app will serve the pre-generated JSON data, which is much faster than querying the database on each request.

## Data Source

The visualization uses data from the triathlon database (`triathlon.db`) generated by the data analysis scripts in the parent directory. The app extracts monthly top athlete ratings using the functions in `monthly_top_ratings.py`.

### Database Configuration

By default, the app looks for the database at `../data/triathlon.db` relative to the web app directory. You can customize this by setting the `TRIATHLON_DB_PATH` environment variable:

```bash
# On Linux/Mac
export TRIATHLON_DB_PATH=/path/to/your/triathlon.db

# On Windows
set TRIATHLON_DB_PATH=C:\path\to\your\triathlon.db
```

Make sure the database exists and contains the necessary tables (`athletes`, `elo_history`, etc.) before running the application.

## Project Structure

- `app.py`: Flask application that serves both the web interface and the data API
- `templates/index.html`: HTML structure for the visualization
- `static/css/styles.css`: Styling for the visualization
- `static/js/main.js`: D3.js visualization code
- `static/img/`: Directory for athlete photos and country flags

## Built With

- [Flask](https://flask.palletsprojects.com/) - Python web framework
- [D3.js](https://d3js.org/) - JavaScript data visualization library

## License

This project is licensed under the MIT License - see the LICENSE file for details.